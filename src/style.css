:root{
  /* Theme colors (light mode) */
  --primary:#0a3d91; --primary-2:#2b6bd9;
  --ink:#0b1220; --muted:#65708a; --line:rgba(10,61,145,.12);
  --bg0:#f7f9ff; --bg1:#eef4ff;
  --glass:#ffffffd6; --glass-2:#ffffffed;
  --radius:16px; --blur:12px;
  --shadow-sm:0 6px 18px rgba(10,61,145,.10);
  --shadow-lg:0 20px 54px rgba(10,61,145,.16);
  --ring:0 0 0 2px rgba(10,61,145,.35);
  --sep:linear-gradient(90deg, transparent, rgba(10,61,145,.16), transparent);
}

:root[data-theme="dark"]{
  /* theme colors (dark mode) */
  --primary:#9fc1ff; --primary-2:#bfd3ff;
  --ink:#e7ecf6; --muted:#a9b9d8; --line:rgba(172,190,232,.20);
  --bg0:#0b1120; --bg1:#090e1a;
  --glass:#0f1528dc; --glass-2:#0f1528f2;
  --shadow-sm:0 8px 26px rgba(3,8,20,.55);
  --shadow-lg:0 26px 70px rgba(3,8,20,.75);
  --ring:0 0 0 2px rgba(172,190,232,.38);
  --sep:linear-gradient(90deg, transparent, rgba(172,190,232,.24), transparent);
}

*{box-sizing:border-box}
html,body{
  height:100%; margin:0; color:var(--ink);
  font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background:
    radial-gradient(900px 520px at -10% 0%, color-mix(in lab, var(--bg1) 42%, transparent) 0%, transparent 60%),
    radial-gradient(900px 520px at 110% -10%, color-mix(in lab, var(--bg1) 42%, transparent) 0%, transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  transition: background .35s ease, color .25s ease;
}

/* layout part */
.ff-app{
  display:grid; grid-template-rows: auto 1fr auto; gap:18px;
  min-height:100dvh; height:auto; padding:24px 28px;
}
.ff-top{ display:grid; grid-template-columns: 340px 1fr; gap:18px; align-items:start; }

/* for cards */
.ff-card,.ff-col{
  background:var(--glass); border:1px solid var(--line); border-radius:var(--radius);
  box-shadow:var(--shadow-sm); backdrop-filter:blur(var(--blur)); overflow:hidden; min-height:0;
  transition: box-shadow .25s ease, border-color .25s ease, background .25s ease;
}
.ff-card:hover,.ff-col:hover{ box-shadow:var(--shadow-lg) }

/* identity part */
.ff-ident{ display:flex; flex-direction:column; padding:12px; gap:8px }
.ff-ident-top{ display:flex; align-items:center; gap:12px }
.ff-title{ margin:0; font-weight:800 }
.ff-slogan{ margin:2px 0 0; color:var(--muted); font-size:12.5px }

/* logo (from two Fs) */
.ff-logo{
  --s:56px; width:var(--s); height:var(--s); border-radius:12px; position:relative; flex:0 0 var(--s);
  background:linear-gradient(145deg,#ffffff,#f3f7ff);
  border:1px solid var(--line);
  box-shadow:inset 0 0 0 2px rgba(10,61,145,.08);
}
:root[data-theme="dark"] .ff-logo{
  background:linear-gradient(145deg,#0f1528,#131b34);
  box-shadow:inset 0 0 0 2px rgba(172,190,232,.06);
}
.ff-logo::before,.ff-logo::after{
  content:"F"; position:absolute; inset:0; display:grid; place-items:center;
  font-weight:900; font-size:28px; line-height:1; color:var(--primary);
}
.ff-logo::after{ transform:translate(6px,4px) rotate(180deg); color:var(--primary-2); opacity:.9 }

/* header and actions */
.ff-right{ display:flex; flex-direction:column; gap:12px; padding:12px 14px }
.ff-right-top{ display:flex; gap:12px; align-items:center; justify-content:center;}

/* buttons and chips */
.ff-btn,.ff-chip{
  background:var(--glass-2); border:1px solid var(--line); color:var(--ink);
  padding:10px 14px; border-radius:14px; cursor:pointer; transition:transform .2s, box-shadow .2s, background .25s;
  user-select:none;
}
.ff-btn:hover{ transform:translateY(-1px); box-shadow:0 8px 20px rgba(10,61,145,.10) }
:root[data-theme="dark"] .ff-btn:hover{ box-shadow:0 8px 22px rgba(0,0,0,.45) }
.ff-chip{ font-size:12px; color:var(--muted) }

/* primary filter button */
.ff-btn.filters{
  position: relative; isolation:isolate; min-width: 240px; padding: 12px 18px;
  font-weight: 800; letter-spacing:.2px; top: 7px; border: 2px solid transparent; border-radius: 999px;
  background:
    linear-gradient(180deg, color-mix(in lab, #fff 92%, var(--bg1) 8%), color-mix(in lab, #fff 85%, var(--bg1) 15%)) padding-box,
    linear-gradient(135deg, var(--primary), var(--primary-2)) border-box;
  box-shadow: 0 8px 20px rgba(10,61,145,.12), inset 0 0 0 0 rgba(255,255,255,0);
  transition: transform .18s ease, box-shadow .25s ease, background .3s ease, filter .25s ease;
}
.ff-btn.filters::before{
  content:""; position:absolute; inset:0; border-radius:999px; z-index:-1;
  background: radial-gradient(120% 180% at 50% -40%, rgba(255,255,255,.55), transparent 55%);
  pointer-events:none;
}
.ff-btn.filters:hover{
  transform: translateY(-1px);
  box-shadow: 0 12px 26px rgba(10,61,145,.16), inset 0 0 0 0 rgba(255,255,255,0);
}
.ff-btn.filters:active{ transform: translateY(0); }
.ff-btn.filters:focus-visible{ outline: none; filter: drop-shadow(0 0 0.35rem color-mix(in lab, var(--primary) 45%, transparent)); }
.ff-btn.filters::after{
  content:""; position:absolute; inset:0; border-radius:999px; z-index:-1; opacity:0;
  background: radial-gradient(60% 60% at var(--rx,50%) var(--ry,50%), color-mix(in lab, var(--primary-2) 38%, transparent), transparent 60%);
  transition: opacity .4s ease;
}
.ff-btn.filters.is-rippling::after{ opacity:.65; }
:root[data-theme="dark"] .ff-btn.filters{
  background:
    linear-gradient(180deg, #131b34, #0f162b) padding-box,
    linear-gradient(135deg, var(--primary), var(--primary-2)) border-box;
  box-shadow: 0 10px 28px rgba(0,0,0,.5), inset 0 0 0 0 rgba(255,255,255,0);
}
:root[data-theme="dark"] .ff-btn.filters:hover{ box-shadow: 0 14px 34px rgba(0,0,0,.6), inset 0 0 0 0 rgba(255,255,255,0); }

/* filters area(open-up) */
.ff-filters{ overflow:hidden; max-height:0; transition:max-height .28s ease }
.ff-filters.open{ max-height:540px }
.ff-filter-inner{
  padding:14px; display:grid; gap:14px;
  background: linear-gradient(180deg, color-mix(in lab, var(--bg1) 55%, transparent), var(--glass-2));
  border:1px solid var(--line); border-radius:14px
}
.ff-filter-group h4{ margin:0 0 8px; color:var(--muted); font-size:12.5px; letter-spacing:.3px; text-transform:uppercase }
.ff-tags{ display:flex; flex-wrap:wrap; gap:10px }
.ff-tag{
  padding:9px 12px; border-radius:999px; border:1px solid var(--line);
  background:linear-gradient(180deg,#fff, color-mix(in lab, #fff 80%, var(--bg1) 20%));
  color:var(--ink); font-size:12.5px; cursor:pointer; transition:.2s;
}
:root[data-theme="dark"] .ff-tag{ background:linear-gradient(180deg,#131b34,#0f162b) }
.ff-tag:hover{ transform:translateY(-1px) }
.ff-tag.active{
  background:linear-gradient(180deg,#ffffff,#f6f9ff);
  border-color:rgba(10,61,145,.35);
  box-shadow:inset var(--ring), 0 6px 14px rgba(10,61,145,.12);
}
:root[data-theme="dark"] .ff-tag.active{
  background:linear-gradient(180deg,#182244,#121a33);
  border-color:rgba(172,190,232,.45);
  box-shadow:inset var(--ring), 0 6px 14px rgba(0,0,0,.35);
}

/* preview-editor */
.ff-preview{ display:flex; flex-direction:column; min-height:40vh }
.ff-toolbar{ display:flex; align-items:center; gap:10px; padding:12px; border-bottom:1px solid var(--line) }
.ff-slider{ appearance:none; width:260px; height:8px; border-radius:999px; outline:none;
  background:linear-gradient(90deg,var(--primary),var(--primary-2));
}
.ff-slider::-webkit-slider-thumb{
  appearance:none; width:16px; height:16px; border-radius:50%; background:#fff;
  box-shadow:0 0 0 3px rgba(10,61,145,.28); cursor:pointer;
}
:root[data-theme="dark"] .ff-slider::-webkit-slider-thumb{
  background:#dfe8ff; box-shadow:0 0 0 3px rgba(172,190,232,.28);
}
.small{ font-size:12.5px; color:var(--muted) }
.ff-toolbar .px{ min-width:48px; text-align:right; font-variant-numeric:tabular-nums }
.ff-toolbar .ff-btn[data-variant]{ background:#fff; border-color:rgba(10,61,145,.25) }
.ff-toolbar .ff-btn[data-variant].active{ box-shadow:inset var(--ring) }
:root[data-theme="dark"] .ff-toolbar .ff-btn[data-variant]{ background:#10182f; border-color:rgba(172,190,232,.25) }

.ff-editor{ flex:1 1 auto; overflow:auto; padding:40px; line-height:1.2; position:relative }
.ff-placeholder{ outline:none; display:inline-block; font-size:120px; word-break:break-word; caret-color:var(--primary); transition: text-shadow .2s ease }
.ff-spacer { flex: 1 }

/* reset button (subtle attention) */
.ff-reset{
  font-weight: 700; letter-spacing:.2px; padding:10px 14px; border-radius: 12px; border: 1px solid var(--line);
  background: linear-gradient(180deg, #ffffff, color-mix(in lab, #fff 86%, var(--bg1) 14%));
  box-shadow: 0 6px 14px rgba(10,61,145,.08);
  transition: transform .18s ease, box-shadow .22s ease, background .25s ease, border-color .25s ease;
}
.ff-reset:hover{ transform: translateY(-1px); box-shadow: 0 10px 22px rgba(10,61,145,.14); border-color: rgba(10,61,145,.28); }
.ff-reset:active{ transform: translateY(0) }
.ff-reset{
  background-image:
    linear-gradient(180deg, #fff, color-mix(in lab, #fff 82%, var(--bg1) 18%)),
    radial-gradient(140% 180% at 50% -40%, rgba(255,90,90,.10), transparent 55%);
}
:root[data-theme="dark"] .ff-reset{
  background:
    linear-gradient(180deg, #131b34, #0f162b),
    radial-gradient(140% 180% at 50% -40%, rgba(255,120,120,.10), transparent 55%);
  border-color: rgba(172,190,232,.22); box-shadow: 0 10px 28px rgba(0,0,0,.45);
}
:root[data-theme="dark"] .ff-reset:hover{
  box-shadow: 0 14px 34px rgba(0,0,0,.6);
  border-color: rgba(172,190,232,.32);
}

/* preview info badges */
.ff-info{
  position:absolute; top:8px; left:8px; display:inline-block; background:color-mix(in lab, #fff 85%, var(--bg1) 15%);
  color:var(--muted); padding:6px 10px; border-radius:10px; font-size:12px; border:none; box-shadow:var(--shadow-sm);
}
:root[data-theme="dark"] .ff-info{ background:color-mix(in lab, #0f1528 80%, #1b2444 20%) }

/* tiny hint label */
.ff-hint{
  position:absolute; right:12px; bottom:10px; color:var(--muted); font-size:12px;
  background:color-mix(in lab, #fff 88%, var(--bg1) 12%); padding:8px 10px; border-radius:10px; border:none; box-shadow:var(--shadow-sm); text-align:center;
}
:root[data-theme="dark"] .ff-hint{ background:color-mix(in lab, #0f1528 80%, #1b2444 20%) }

/* font list in browser */
.ff-browser .ff-list{ max-height: 280px; overflow-y: auto; padding: 10px; }
.ff-item{
  display:grid; grid-template-columns: 1fr auto; row-gap:6px; column-gap:10px; align-items:center; height: 60px;
  padding:12px; margin-bottom:8px; border-radius:12px;
  background:linear-gradient(180deg,#ffffff,#f7f9ff); border:1px solid var(--line);
  transition:transform .2s ease, box-shadow .15s, border-color .15s; cursor:pointer; position:relative;
}
:root[data-theme="dark"] .ff-item{ background:linear-gradient(180deg,#121a34,#10182d) }
.ff-item:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(10,61,145,.10) }
:root[data-theme="dark"] .ff-item:hover{ box-shadow:0 8px 22px rgba(0,0,0,.45) }
.ff-item.active{ border-color:rgba(10,61,145,.5); box-shadow:inset var(--ring) }
.ff-item .name{ font-size: 13px; color: #0a3d91; font-weight: 600; letter-spacing: 0.2px; transition: color .25s ease; }
.ff-item:hover .name{ color: var(--primary-2); }
.ff-item .sub{ font-size:12px; color:var(--muted) }
.ff-item .sample{ grid-column:1 / -1; font-size:15px; color:#2a2f3a; opacity:.9 }
:root[data-theme="dark"] .ff-item .sample{ color:#d5def6 }
.ff-item::after{ content:""; grid-column:1 / -1; height:1px; margin:6px 0 8px; background:var(--sep); }

/* search bar/searchs */
.ff-search{
  position: sticky; top: 0; z-index: 1; display: flex; align-items: center; gap: 8px;
  padding: 10px; background: var(--glass-2); border-bottom: 1px solid var(--line); backdrop-filter: blur(var(--blur));
}
.ff-search input[type="text"]{
  flex: 1; height: 36px; border: 1px solid var(--line); border-radius: 10px; background: #fff;
  padding: 0 10px; font-size: 14px; color: var(--ink); outline: none;
}
:root[data-theme="dark"] .ff-search input[type="text"]{ background:#0f162b; color:var(--ink); }
.ff-search .clear-btn{
  height: 36px; padding: 0 10px; border: 1px solid var(--line); border-radius: 10px; background: var(--glass-2);
  cursor: pointer; font-size: 13px;
}
[data-theme="dark"] .clear-btn {
  color: white;       
  fill: white;       
  stroke: white;  
}

.ff-hit{ background: color-mix(in lab, var(--primary-2) 28%, transparent); border-radius: 4px; padding: 0 2px; }

/* history panel */
.ff-history{
  position:fixed; width:min(360px, 92vw); opacity:0; transform:translateY(8px) scale(.98); transition:opacity .2s ease, transform .2s ease;
  z-index:60; pointer-events:none; background:var(--glass-2); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow-lg);
  backdrop-filter:blur(var(--blur)); max-height:70vh; display:flex; flex-direction:column; overflow:hidden;
}
.ff-history.open{ opacity:1; transform:translateY(0) scale(1); pointer-events:auto }
.ff-history .title{ padding:12px 14px; color:var(--muted); border-bottom:1px solid var(--line); font-size:13px }
.ff-history .ff-list{ padding:10px; overflow:auto }

/* larger history tiles + bigger sample */
.ff-history .ff-item{ min-height: 80px; padding: 16px 14px; }
.ff-history .ff-item .sample{ font-size: 15px; line-height: 1.3; }

/* toast */
.ff-toast{
  position:fixed; left:50%; bottom:28px; transform:translateX(-50%) translateY(20px);
  background:#fff; border:1px solid var(--line); box-shadow:var(--shadow-sm);
  padding:10px 14px; border-radius:10px; font-size:13px; color:var(--ink);
  opacity:0; transition:.25s; z-index:80;
}
:root[data-theme="dark"] .ff-toast{ background:#121a34 }
.ff-toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }

/* theme switcher */
.ff-theme-bar{
  position: static; display: flex; align-items: center; gap: 4px; padding: 6px 8px;
  border: 1px solid var(--line); border-radius: 999px; background: var(--glass-2); box-shadow: var(--shadow-sm);
}
.ff-theme-toggle{
  appearance:none; width:54px; height:28px; border-radius:999px;
  background:linear-gradient(180deg,#e3e8f3,#f8faff); border:1px solid var(--line);
  position:relative; cursor:pointer;
}
.ff-theme-toggle::before{
  content:""; position:absolute; top:1px; left:1px; width:24px; height:24px; border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, #dde4f1); box-shadow:0 1px 3px rgba(0,0,0,.08); transition:.25s;
}
.ff-theme-toggle:checked::before{ left:calc(100% - 25px) }
:root[data-theme="dark"] .ff-theme-toggle{ background:linear-gradient(180deg,#0f162b,#10182f) }
:root[data-theme="dark"] .ff-theme-toggle::before {
  background: radial-gradient(circle at 30% 30%, #e6eeff, #b0c4ff);
  box-shadow: 0 0 4px rgba(255, 255, 255, 0.6), 0 1px 3px rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.7);
}
/* intro overlay + animations */
body.intro { overflow: hidden; }
#ff-intro{
  position: fixed; inset: 0; z-index: 999; display: grid; place-items: center;
  background:
    radial-gradient(900px 520px at -10% 0%, color-mix(in lab, var(--bg1) 42%, transparent) 0%, transparent 60%),
    radial-gradient(900px 520px at 110% -10%, color-mix(in lab, var(--bg1) 42%, transparent) 0%, transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  backdrop-filter: blur(6px);
}
#ff-intro .ff-logo{ --s:120px; width:var(--s); height:var(--s); border-radius:20px; }
#ff-intro .ff-logo::before{ animation: ffLeftIn 0.9s cubic-bezier(.2,.8,.2,1) .05s both; }
#ff-intro .ff-logo::after{ animation: ffRightIn 0.9s cubic-bezier(.2,.8,.2,1) .05s both; }

@keyframes ffLeftIn{
  0%{ transform: translate(-140%,0) rotate(-180deg); opacity: 0; }
  70%{ opacity: 1; }
  100%{ transform: translate(0,0) rotate(0deg); opacity: 1; }
}
@keyframes ffRightIn{
  0%{ transform: translate(140%,0) rotate(360deg); opacity: 0; }
  70%{ opacity: 1; }
  100%{ transform: translate(6px,4px) rotate(180deg); opacity: 1; }
}
#ff-intro.fade { animation: ffIntroOut .5s ease both; }
@keyframes ffIntroOut { to { opacity: 0; backdrop-filter: blur(0px); } }

/* reveal app after intro */
body.intro .ff-app{ opacity: 0; transform: translateY(12px); filter: blur(8px); }
body.ready .ff-app{
  opacity: 1; transform: none; filter: none;
  transition: opacity .55s ease, transform .55s ease, filter .55s ease;
}
